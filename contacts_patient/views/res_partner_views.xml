<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_partner_form_patient_inherit" model="ir.ui.view">
        <field name="name">res.partner.form.patient.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet/div[@name='button_box']" position="after">
                <div class="oe_title">
                    <field name="is_patient"/>
                    <label for="is_patient" string="Paziente"/>
                </div>
            </xpath>
            <xpath expr="//sheet/notebook" position="inside">
                <page string="Dati clinici" invisible="not is_patient">
                    <div class="oe_button_box">
                        <button name="action_open_clinical_sheet" type="object" class="oe_stat_button" icon="fa-folder-medical" invisible="not has_clinical_sheet">
                            <div class="o_field_widget">
                                <span class="o_stat_text">Apri</span>
                                <span class="o_stat_text">Cartella Clinica</span>
                            </div>
                        </button>
                        <button name="action_create_clinical_sheet" type="object" class="oe_stat_button" icon="fa-plus" invisible="has_clinical_sheet">
                            <div class="o_field_widget">
                                <span class="o_stat_text">Crea</span>
                                <span class="o_stat_text">Cartella Clinica</span>
                            </div>
                        </button>
                    </div>
                    <group string="Informazioni Anagrafiche" col="2">
                        <field name="birth_date"/>
                        <field name="age" readonly="1"/>
                        <field name="biological_sex"/>
                        <field name="gender_identity"/>
                        <field name="birthplace"/>
                        <field name="nationality"/>
                        <field name="marital_status"/>
                        <field name="profession"/>
                        <field name="education_level" colspan="2"/>
                    </group>

                    <group string="Ã‰quipe" col="2">
                        <field name="tutor"/>
                        <field name="tutor_non_attivo"/>
                        <field name="date_tutor_assignment"/>
                        <field name="data_fine_incarico_tutor" readonly="1"/>
                        <field name="type_professional"/>
                        <field name="professional"/>
                        <field name="professionista_non_attivo"/>
                        <field name="date_professional_assignment"/>
                        <field name="data_fine_incarico_professionista" readonly="1"/>
                        <field name="date_taken_charge"/>
                    </group>

                    <group string="Dati consensi">
                        <field name="informativa_privacy"/>
                        <field name="consenso_prestazione_mod_unico"/>
                        <field name="consenso_informato_ac_valproico"/>
                        <field name="consenso_al_trattamento_offlabel"/>
                    </group>
                    <group string="Completamento Scheda" col="2" invisible="not has_clinical_sheet">
                        <field name="clinical_sheet_id" invisible="1"/>
                        <field name="overall_completion" widget="progressbar"/>
                    </group>
                </page>
            </xpath>
        </field>
    </record>
</odoo>
